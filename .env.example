# CosmosKids Environment Variables
# Copy this file to .env.local for development or .env.production for production

# ============================================================================
# Application Configuration
# ============================================================================

NODE_ENV=development
PORT=3000

# Application URL (use localhost for dev, actual domain for production)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================================================
# Supabase Configuration
# ============================================================================

# Public variables (safe for client-side)
NEXT_PUBLIC_SUPABASE_URL=https://api.supabase.smartcamp.ai
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Server-only variables (NEVER expose to client)
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_JWT_SECRET=your-jwt-secret-here

# Database connection (if needed for direct access)
DATABASE_URL=postgresql://postgres:password@api.supabase.smartcamp.ai:5432/postgres

# ============================================================================
# n8n Integration
# ============================================================================

# n8n webhook base URL
N8N_WEBHOOK_URL=https://n8n.smartcamp.ai/webhook

# Webhook endpoints (append to N8N_WEBHOOK_URL)
# Example: ${N8N_WEBHOOK_URL}/cosmoskids-welcome
N8N_WELCOME_WEBHOOK_PATH=cosmoskids-welcome
N8N_WEEKLY_REPORT_WEBHOOK_PATH=cosmoskids-weekly-report
N8N_ACHIEVEMENT_WEBHOOK_PATH=cosmoskids-achievement

# n8n API key (if needed for programmatic workflow access)
N8N_API_KEY=your-n8n-api-key

# ============================================================================
# Flowise AI Integration
# ============================================================================

# Flowise API URL
FLOWISE_URL=https://flowise.smartcamp.ai

# Flowise API key
FLOWISE_API_KEY=your-flowise-api-key

# Chatflow IDs for different AI agents
FLOWISE_SPACE_TUTOR_CHATFLOW_ID=your-chatflow-id-here
FLOWISE_PROGRESS_ANALYZER_CHATFLOW_ID=your-analyzer-chatflow-id

# ============================================================================
# Gotenberg PDF Service
# ============================================================================

# Gotenberg URL (internal Docker network or external)
# For VPS deployment: http://gotenberg:3000
# For local development: http://localhost:3001 (if running locally)
GOTENBERG_URL=http://gotenberg:3000

# ============================================================================
# Authentication & Security
# ============================================================================

# NextAuth secret (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your-nextauth-secret-here
NEXTAUTH_URL=http://localhost:3000

# Session configuration
SESSION_MAX_AGE=2592000
# 30 days in seconds

# ============================================================================
# Email Configuration (for notifications if not using n8n)
# ============================================================================

# SMTP settings (or use SendGrid, etc.)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@smartcamp.ai
SMTP_FROM_NAME=CosmosKids

# Alternative: SendGrid API
SENDGRID_API_KEY=your-sendgrid-api-key

# ============================================================================
# Analytics & Monitoring (Optional)
# ============================================================================

# Google Analytics
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Sentry (error tracking)
NEXT_PUBLIC_SENTRY_DSN=your-sentry-dsn
SENTRY_AUTH_TOKEN=your-sentry-auth-token

# ============================================================================
# Feature Flags
# ============================================================================

# Enable/disable features
NEXT_PUBLIC_ENABLE_AI_CHAT=true
NEXT_PUBLIC_ENABLE_PDF_REPORTS=true
NEXT_PUBLIC_ENABLE_ACHIEVEMENTS=true
NEXT_PUBLIC_ENABLE_SOCIAL_SHARING=false

# ============================================================================
# Content & Media
# ============================================================================

# Maximum file upload sizes (in bytes)
MAX_AVATAR_SIZE=5242880
# 5MB
MAX_REPORT_SIZE=10485760
# 10MB

# Allowed file types
ALLOWED_AVATAR_TYPES=image/jpeg,image/png,image/webp
ALLOWED_DOCUMENT_TYPES=application/pdf,image/jpeg,image/png

# ============================================================================
# Rate Limiting
# ============================================================================

# API rate limits (requests per minute)
RATE_LIMIT_WINDOW=60000
# 1 minute in ms
RATE_LIMIT_MAX_REQUESTS=100

# AI chat rate limits
AI_CHAT_RATE_LIMIT=20
# messages per hour per child

# ============================================================================
# Development Tools
# ============================================================================

# Disable telemetry
NEXT_TELEMETRY_DISABLED=1

# Enable debug logging
DEBUG=false
LOG_LEVEL=info
# debug, info, warn, error

# ============================================================================
# Production-Specific Variables
# ============================================================================

# When deploying to VPS, also set:
# - NEXT_PUBLIC_APP_URL=https://cosmoskids.smartcamp.ai
# - NODE_ENV=production
# - All API keys and secrets with production values

# ============================================================================
# Local Development Notes
# ============================================================================

# For local development with Supabase:
# 1. Option A: Connect to production Supabase (use URLs above)
# 2. Option B: Run Supabase locally (use localhost URLs)
#    NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
#    NEXT_PUBLIC_SUPABASE_ANON_KEY=your-local-anon-key

# For local development without n8n/Flowise/Gotenberg:
# - Mock these services or disable features
# - Set NEXT_PUBLIC_ENABLE_* flags to false as needed
